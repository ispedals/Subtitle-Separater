<!doctype html>
<title></title>
<body>
<video src="file:///C:\Users\Owner\Desktop\Live Action Toy Story.mp4" />
</body>
<script>
function video_statistics(v) {
	return 'Current Time: ' + v.currentTime +
			   ' Paused: ' + v.paused;
}

var log= (function () {
	var socket = new WebSocket('ws://127.0.0.1:3000/messageToController');
	socket.onmessage = function (event) {
		console.log(event.data);
	};
	return function (message) {
		console.log(message);
		socket.send(message);
	};
})();

var v = document.getElementsByTagName("video")[0];

var handled_events = {
	'ended': function () { log('Video Ended: ' + video_statistics(v));},
	'pause': function () { log('Video Paused: ' + video_statistics(v));},
	'playing': function () { log('Video Paused: ' + video_statistics(v));},
	'seeked': function () { log('Video Seeked: ' + video_statistics(v));},
	'timeupdate': function () { log('Video Time Changed: ' + video_statistics(v));}
};

for (var event in handled_events) {
	if( handled_events.hasOwnProperty( event ) ) {
		v.addEventListener( event, handled_events[event], false);
	}
}
</script>